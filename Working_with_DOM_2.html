<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Working with DOM</title>
</head>
<body>
    <button id="fetch-button">Fetch Data</button>
    <button id="remove-button">Remove Data</button>
    <table id="data-container" border="2"></table>
    <script type="text/javascript">
    
    let fetchData = async () => {
        let response = await fetch("https://jsonplaceholder.typicode.com/posts");
        let data = await response.json();
        localStorage.setItem('fetchData', JSON.stringify(data));
        return data;
    };

    let getData = () => JSON.parse(localStorage.getItem('fetchData'));

    let displayData = () => {   
    let show = getData();
    let container = document.getElementById('data-container');
    container.innerHTML = '';
        Array.isArray(show)
            ? show.map(val => {
                let row = document.createElement('tr');
                let cell = document.createElement('td');
                //cell.textContent is used to set the text content of the td element
                // item.title accesses the value of the title property of the current item object
                cell.textContent = val.title;
                row.appendChild(cell);
                container.appendChild(row);
            })
            : container.innerHTML = '<tr><td>Data removed</td></tr>';
    };

    //-button 
    let Fetch_Click = async () => {
        await fetchData();
        displayData();
        // console.log("data displayed");
    };
    let Remove_Click = () => {
        localStorage.removeItem('fetchData');
        displayData();
        // console.log("dara removed");
    };
  
    document.getElementById('fetch-button').addEventListener('click', Fetch_Click);
    document.getElementById('remove-button').addEventListener('click', Remove_Click);

    </script>
</body>
</html>